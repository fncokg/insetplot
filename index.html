<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Inset Plots for Spatial Data Visualization • insetplot</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Inset Plots for Spatial Data Visualization">
<meta name="description" content="insetplot is an R package to create ggplot2 maps with inset maps easily and flexibly. One crucial feature of maps is that they have fixed coordinate ratios, i.e., they cannot be distorted, which makes it difficult to manually place inset maps. This package provides functions to automatically position inset maps based on user-defined parameters, making it extremely easy to create maps with inset maps with minimal code.">
<meta property="og:description" content="insetplot is an R package to create ggplot2 maps with inset maps easily and flexibly. One crucial feature of maps is that they have fixed coordinate ratios, i.e., they cannot be distorted, which makes it difficult to manually place inset maps. This package provides functions to automatically position inset maps based on user-defined parameters, making it extremely easy to create maps with inset maps with minimal code.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">insetplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/insetplot.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fncokg/insetplot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="insetplot">insetplot<a class="anchor" aria-label="anchor" href="#insetplot"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>insetplot is an R package to create ggplot2 maps with inset maps easily and flexibly. It handles spatial configuration, aspect ratios, and plot composition automatically.</p>
<div class="section level2">
<h2 id="quick-start">Quick start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="section level3">
<h3 id="approach-1-reuse-one-plot-simplest">Approach 1: Reuse one plot (simplest)<a class="anchor" aria-label="anchor" href="#approach-1-reuse-one-plot-simplest"></a>
</h3>
<p>Use the same plot for the main map and all insets — let insetplot handle sizing and positioning.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fncokg.github.io/insetplot/">insetplot</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data</span></span>
<span><span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"shape/nc.shp"</span>, package <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Configure insets: one main + one inset</span></span>
<span><span class="fu"><a href="reference/config_insetmap.html">config_insetmap</a></span><span class="op">(</span></span>
<span>  data_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span>,</span>
<span>  specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="reference/inset_spec.html">inset_spec</a></span><span class="op">(</span>main <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="reference/inset_spec.html">inset_spec</a></span><span class="op">(</span></span>
<span>      xmin <span class="op">=</span> <span class="op">-</span><span class="fl">84</span>, xmax <span class="op">=</span> <span class="op">-</span><span class="fl">75</span>, ymin <span class="op">=</span> <span class="fl">33</span>, ymax <span class="op">=</span> <span class="fl">37</span>,</span>
<span>      loc <span class="op">=</span> <span class="st">"left bottom"</span>, scale_factor <span class="op">=</span> <span class="fl">0.5</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compose</span></span>
<span><span class="fu"><a href="reference/with_inset.html">with_inset</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">nc</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">AREA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="approach-2-custom-plot-per-subplot">Approach 2: Custom plot per subplot<a class="anchor" aria-label="anchor" href="#approach-2-custom-plot-per-subplot"></a>
</h3>
<p>Provide specific plots for the main and inset maps.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">base_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">nc</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">AREA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">main_plot</span> <span class="op">&lt;-</span> <span class="va">base_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Full North Carolina"</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">inset_plot</span> <span class="op">&lt;-</span> <span class="va">base_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Detail Region"</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="reference/config_insetmap.html">config_insetmap</a></span><span class="op">(</span></span>
<span>  data_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span>,</span>
<span>  specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="reference/inset_spec.html">inset_spec</a></span><span class="op">(</span>main <span class="op">=</span> <span class="cn">TRUE</span>, plot <span class="op">=</span> <span class="va">main_plot</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="reference/inset_spec.html">inset_spec</a></span><span class="op">(</span></span>
<span>      xmin <span class="op">=</span> <span class="op">-</span><span class="fl">84</span>, xmax <span class="op">=</span> <span class="op">-</span><span class="fl">75</span>, ymin <span class="op">=</span> <span class="fl">33</span>, ymax <span class="op">=</span> <span class="fl">37</span>,</span>
<span>      loc <span class="op">=</span> <span class="st">"left bottom"</span>, scale_factor <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>      plot <span class="op">=</span> <span class="va">inset_plot</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/with_inset.html">with_inset</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># plot argument optional when each spec has its own plot</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"fncokg/insetplot"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>Full documentation and more examples are available at <a href="https://fncokg.github.io/insetplot/">insetplot package site</a>.</p>
</div>
<div class="section level2">
<h2 id="core-functions">Core functions<a class="anchor" aria-label="anchor" href="#core-functions"></a>
</h2>
<ul>
<li>
<code><a href="reference/inset_spec.html">inset_spec()</a></code> — Define bbox, position, and size for each subplot
<ul>
<li>bbox: <code>xmin, xmax, ymin, ymax</code>
</li>
<li>position: <code>loc</code> (e.g., “left bottom”) or <code>loc_left</code>/<code>loc_bottom</code> in [0, 1]</li>
<li>size: prefer <code>scale_factor</code>; or provide one of <code>width</code>/<code>height</code>
</li>
<li>
<code>plot</code>: optional custom ggplot object</li>
<li>
<code>main</code>: exactly one spec must set <code>main = TRUE</code>
</li>
</ul>
</li>
<li>
<code><a href="reference/config_insetmap.html">config_insetmap()</a></code> — Build and store configuration
<ul>
<li>
<code>data_list</code>: list of sf objects</li>
<li>
<code>specs</code>: list of <code><a href="reference/inset_spec.html">inset_spec()</a></code>
</li>
<li>
<code>crs</code>: target CRS (passed to coord_sf as <code>crs</code>)</li>
<li>
<code>border_args</code>: forwarded to <code><a href="reference/map_border.html">map_border()</a></code> for inset borders</li>
</ul>
</li>
<li>
<code><a href="reference/with_inset.html">with_inset()</a></code> — Compose main plot with insets
<ul>
<li>
<code>plot</code>: single ggplot or list per spec (optional)</li>
<li>
<code>.as_is</code>: return the input plot as-is (skip inset composition)</li>
<li>
<code>.return_details</code>: return <code>list(full, subplots, subplot_layouts, main_ratio)</code>
</li>
</ul>
</li>
<li>
<code><a href="reference/ggsave_inset.html">ggsave_inset()</a></code> — Save with the correct aspect ratio
<ul>
<li>Provide one of <code>width</code> or <code>height</code>; the other is computed from <code>main_ratio</code>
</li>
<li>Optional <code>ratio_scale</code> for small adjustments (e.g., legends)</li>
</ul>
</li>
<li>
<code><a href="reference/map_border.html">map_border()</a></code> — Small theme to draw a rectangular border around plots</li>
</ul>
</div>
<div class="section level2">
<h2 id="further-examples">Further examples<a class="anchor" aria-label="anchor" href="#further-examples"></a>
</h2>
<div class="section level3">
<h3 id="custom-positioning-and-sizing">Custom positioning and sizing<a class="anchor" aria-label="anchor" href="#custom-positioning-and-sizing"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/config_insetmap.html">config_insetmap</a></span><span class="op">(</span></span>
<span>  data_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span>,</span>
<span>  specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="reference/inset_spec.html">inset_spec</a></span><span class="op">(</span>main <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="reference/inset_spec.html">inset_spec</a></span><span class="op">(</span></span>
<span>      xmin <span class="op">=</span> <span class="op">-</span><span class="fl">84</span>, xmax <span class="op">=</span> <span class="op">-</span><span class="fl">75</span>, ymin <span class="op">=</span> <span class="fl">33</span>, ymax <span class="op">=</span> <span class="fl">37</span>,</span>
<span>      loc_left <span class="op">=</span> <span class="fl">0.05</span>, loc_bottom <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>      <span class="co"># Use width only; height auto-calculated to preserve aspect ratio</span></span>
<span>      width <span class="op">=</span> <span class="fl">0.25</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/with_inset.html">with_inset</a></span><span class="op">(</span><span class="va">base_plot</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pass-custom-plots-after-configuration">Pass custom plots after configuration<a class="anchor" aria-label="anchor" href="#pass-custom-plots-after-configuration"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/config_insetmap.html">config_insetmap</a></span><span class="op">(</span></span>
<span>  data_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span>,</span>
<span>  specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="reference/inset_spec.html">inset_spec</a></span><span class="op">(</span>main <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="reference/inset_spec.html">inset_spec</a></span><span class="op">(</span></span>
<span>      xmin <span class="op">=</span> <span class="op">-</span><span class="fl">84</span>, xmax <span class="op">=</span> <span class="op">-</span><span class="fl">75</span>, ymin <span class="op">=</span> <span class="fl">33</span>, ymax <span class="op">=</span> <span class="fl">37</span>,</span>
<span>      loc <span class="op">=</span> <span class="st">"left bottom"</span>, scale_factor <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/with_inset.html">with_inset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">main_plot</span>, <span class="va">inset_plot</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="save-with-correct-aspect-ratio">Save with correct aspect ratio<a class="anchor" aria-label="anchor" href="#save-with-correct-aspect-ratio"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ggsave_inset.html">ggsave_inset</a></span><span class="op">(</span></span>
<span>  <span class="st">"map_with_insets.png"</span>,</span>
<span>  plot <span class="op">=</span> <span class="va">composed_plot</span>,</span>
<span>  <span class="co"># `height` auto-calculated from `main_ratio`</span></span>
<span>  width <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  dpi <span class="op">=</span> <span class="fl">300</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="debugging-with-detailed-output">Debugging with detailed output<a class="anchor" aria-label="anchor" href="#debugging-with-detailed-output"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/with_inset.html">with_inset</a></span><span class="op">(</span>plot <span class="op">=</span> <span class="va">my_plot</span>, .return_details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># result$full, result$subplots, result$subplot_layouts, result$main_ratio</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/fncokg/insetplot/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/fncokg/insetplot/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing insetplot</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Chao Kong <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-6404-6142" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chao Kong.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
